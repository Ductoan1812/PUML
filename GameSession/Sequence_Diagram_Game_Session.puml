@startuml Sequence_Diagram_Game_Session
!theme plain

title Biểu đồ Trình tự - UC Khởi tạo Game Session

actor Player
participant "Giao diện" as UI
participant "Hệ thống" as System
database "DataBase" as DB

Player -> UI: 1. Chọn "Continue Game"
activate UI
UI -> System: 2. Kiểm tra điều kiện khởi động
activate System

System -> DB: 3. Tìm kiếm file save
activate DB
DB --> System: 4. Trả về file save
deactivate DB

System -> System: 5. Kiểm tra tính hợp lệ file save

alt file save hợp lệ
    System -> DB: 6. Load thông tin nhân vật
    activate DB
    DB --> System: 7. Trả về data nhân vật
    deactivate DB
    
    System -> DB: 8. Load dữ liệu bản đồ
    activate DB
    DB --> System: 9. Trả về data bản đồ
    deactivate DB
    
    System -> System: 10. Render bản đồ và spawn objects
    System -> System: 11. Tạo character object
    System -> System: 12. Đặt nhân vật tại vị trí spawn
    
    System --> UI: 13. Thông báo khởi tạo thành công
    UI --> Player: 14. Hiển thị game world
    
else file save không hợp lệ
    System --> UI: 15. Thông báo lỗi save file
    UI --> Player: 16. Hiển thị "File save bị lỗi"
    UI --> Player: 17. Quay về menu chính
end

deactivate System
deactivate UI

@enduml